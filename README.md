t4ts
====

T4 template to generate TypeScript interface definitions.


Usage
----
 1. Install the NuGet package (https://nuget.org/packages/T4TS).

 2. Decoreate any C# class that you want to generate an interface for, with the **TypeScriptInterface** attribute (in the T4TS namespace). The attribute is generated by the .tt-file.

 3. Run the .tt-file (right-click and select *Run custom tool*).

 4. The generated file T4TS.d.ts will now contain the interfaces that can be used in your TypeScript files


Example
----

C# classes:

    [TypeScriptInterface]
    public class MyModel
    {
        public int Number { get; set; }
        public string Name { get; set; }
        public ReferencedModel Ref { get; set; }
    }

    [TypeScriptInterface]
    public class ReferencedModel
    {
        public double Fraction { get; set; }
        public int[] Digits { get; set; }
    }

Resulting T4TS.d.ts:

    module T4TS {
        export interface MyModel {
            Number: number;
            Name: string;
            Ref: ReferencedModel;
        }
        export interface MyModel {
            Fraction: number;
            Digits: number[];
        }
    }

This interface can now be used in your TypeScript files:

    /// <reference path="T4TS.d.ts" />
    class Test {
        constructor () {
            // Make an AJAX post and get some data from the server.
            // In the callback, you can specify that the data is of a certain type:
            $.post('./example', {}, (data: T4TS.MyModel) => {
                // Intellisense support for the properties:
                alert(data.Number.toString());
                alert(data.Ref.Digits[0]);
            });
        }
    }

Specifications
----
 * Only public properties are considered

 * Right now, `System.DateTime` is considered a `string` in the type translation. The main reason is that the [JSON serialization in .NET MVC](http://stackoverflow.com/questions/726334/asp-net-mvc-jsonresult-date-format) will typically serialize a `DateTime` as `"\/Date(ticks)\/"`

 * The type translation works like this, from C# => TypeScript, for each property:
   * Built-in numeric type (`int`, `double`, `float`, etc.) **=>** `number`
   * `string` **=>** `string`
   * A class marked with `[TypeScriptInterface]` **=>** lookup the generated TypeScript name
   * Otherwise **=>** `any`
   * For `Collection<T>`, `List<T>`, `IList<T>` and `T[]` **=>** lookup type for `T` as above, and return `T[]`.

Future work and ideas
----
 * Settings-file to customize the generated interfaces.
 * Add a `Module` property to `TypeScriptInterfaceAttribute` to control which module the generated TypeScript interface should be placed in.
 * Add a `Name` property to `TypeScriptInterfaceAttribute` to control the name of the generated TypeScript interface.